<div class="space-y-6">
    <section>
        <h2 class="text-lg font-semibold text-slate-700 mb-3">โครงการของฉัน (Filtered by RLS)</h2>
        <div id="my-project-list-container" class="card">
             <table class="w-full text-sm">
                <thead>
                    <tr class="border-b"><th class="text-left py-2">Code</th><th class="text-left py-2">Name</th><th class="text-left py-2">Status</th></tr>
                </thead>
                <tbody id="my-project-list-body">
                    <tr><td colspan="3" class="text-center text-slate-400 py-4">Loading my projects...</td></tr>
                </tbody>
            </table>
        </div>
    </section>
</div>

<script>
    // Page-specific initialization logic
    window.pageInit = window.pageInit || {};
    window.pageInit.employee_dashboard = async (currentUser) => {
        console.log('Initializing Employee Dashboard for:', currentUser.email);
        
        const projectListBody = document.getElementById('my-project-list-body');

        // Fetch data using functions from api.js
        const projects = await api.getProjects(); // RLS automatically filters to show only this user's projects

        // Render Projects
        if (projects.length > 0) {
            projectListBody.innerHTML = projects.map(p => `
                <tr class="border-b hover:bg-slate-50">
                    <td class="py-2"><a href="#project_detail?id=${encodeURIComponent(p.id)}">${p.project_code}</a></td>
                    <td class="py-2">${p.name}</td>
                    <td class="py-2"><span class="pill ${p.status === 'Active' ? 'bg-sky-100 text-sky-700' : 'bg-amber-100 text-amber-700'}">${p.status}</span></td>
                </tr>
            `).join('');
        } else {
            projectListBody.innerHTML = '<tr><td colspan="3" class="text-center text-slate-400 py-4">You are not assigned to any projects.</td></tr>';
        }
    };
</script>